# ğŸš€ OCR Webåº”ç”¨ - V1ç‰ˆæœ¬éƒ¨ç½²æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

åŸºäºç¬¬ä¸€ä¸ªæˆåŠŸç‰ˆæœ¬ï¼Œé€‚é…Vercel Serverlessæ¶æ„çš„OCRå›¾ç‰‡è¯†åˆ«Webåº”ç”¨ã€‚

### ğŸ”§ æŠ€æœ¯æ ˆ
- **åç«¯**: Node.js + Express + Multer + Axios
- **å‰ç«¯**: HTML5 + CSS3 + åŸç”ŸJavaScript (è“ç™½æ¸å˜ä¸»é¢˜)
- **OCRæœåŠ¡**: Google Gemini 2.0 Flashæ¨¡å‹ (é€šè¿‡n8n webhook)
- **éƒ¨ç½²**: Vercel Serverless Functions
- **å­˜å‚¨**: å†…å­˜å­˜å‚¨ (é€‚é…Serverless)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
ocr/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ server.js           # Vercel Serverless API
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ script.js           # å‰ç«¯é€»è¾‘
â”œâ”€â”€ server.js               # æœ¬åœ°å¼€å‘æœåŠ¡å™¨
â”œâ”€â”€ vercel.json             # Vercelé…ç½®
â”œâ”€â”€ test-webhook.js         # Webhookæµ‹è¯•å·¥å…·
â”œâ”€â”€ test-v1-adapted.html    # æµ‹è¯•é¡µé¢
â”œâ”€â”€ n8n-webhook-fix.md      # n8né…ç½®æŒ‡å—
â””â”€â”€ package.json
```

## ğŸ› ï¸ æœ¬åœ°å¼€å‘

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
```bash
# åŸå§‹ç‰ˆæœ¬ (3000ç«¯å£)
node server.js

# Vercelé€‚é…ç‰ˆæœ¬ (3001ç«¯å£)
cd api && node server.js
```

### 3. è®¿é—®åº”ç”¨
- **ä¸»åº”ç”¨**: http://localhost:3000
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/health
- **æµ‹è¯•é¡µé¢**: æ‰“å¼€ `test-v1-adapted.html`

## ğŸ”— Webhooké…ç½®

### n8n Webhook URL
```
https://n8n.bighouse94946.fun/webhook/56fa0dd0-c4ce-4a3a-b5e3-53e7469547e6
```

### æµ‹è¯•Webhookè¿æ¥
```bash
node test-webhook.js
```

### ä¿®å¤n8né…ç½® (å¦‚æœè¿”å›ç©ºæ•°æ®)
å‚è€ƒ `n8n-webhook-fix.md` ä¸­çš„è¯¦ç»†è¯´æ˜ã€‚

## ğŸš€ Verceléƒ¨ç½²

### 1. æ¨é€ä»£ç åˆ°GitHub
```bash
git add .
git commit -m "å‡†å¤‡Verceléƒ¨ç½²"
git push origin v1-original
```

### 2. åœ¨Vercelä¸­éƒ¨ç½²
1. ç™»å½• [Vercelæ§åˆ¶å°](https://vercel.com)
2. å¯¼å…¥GitHubä»“åº“
3. é€‰æ‹© `v1-original` åˆ†æ”¯
4. éƒ¨ç½²é…ç½®è‡ªåŠ¨æ£€æµ‹ (`vercel.json`)

### 3. ç¯å¢ƒå˜é‡ (å¯é€‰)
å¦‚æœéœ€è¦è¦†ç›–é»˜è®¤webhook URLï¼š
```
OCR_WEBHOOK_URL=https://your-custom-webhook-url
```

### 4. è‡ªå®šä¹‰åŸŸå
åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ï¼š
```
ocr.bighouse94946.fun
```

## ğŸ§ª æµ‹è¯•éƒ¨ç½²

### 1. å¥åº·æ£€æŸ¥
```bash
curl https://ocr.bighouse94946.fun/health
```

### 2. ä½¿ç”¨æµ‹è¯•é¡µé¢
è®¿é—®éƒ¨ç½²åçš„ `test-v1-adapted.html` æˆ–ä¸»åº”ç”¨é¡µé¢

### 3. OCRåŠŸèƒ½æµ‹è¯•
1. ä¸Šä¼ åŒ…å«æ–‡å­—çš„å›¾ç‰‡
2. æŸ¥çœ‹è¯†åˆ«ç»“æœ
3. æ£€æŸ¥å“åº”æ—¶é—´ (é¢„æœŸ1-3ç§’)

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **æ–‡ä»¶å¤§å°é™åˆ¶**: 10MB
- **å“åº”è¶…æ—¶**: 25ç§’
- **Vercelå‡½æ•°è¶…æ—¶**: 30ç§’
- **é¢„æœŸå“åº”æ—¶é—´**: 1-3ç§’
- **æ”¯æŒæ ¼å¼**: JPG, PNG, GIF

## ğŸ› æ•…éšœæ’é™¤

### 1. Webhookè¿æ¥å¤±è´¥
```bash
# æµ‹è¯•webhookè¿æ¥
node test-webhook.js

# æ£€æŸ¥n8nå·¥ä½œæµçŠ¶æ€
# è®¿é—® https://n8n.bighouse94946.fun
```

### 2. è¿”å›ç©ºæ•°æ®
- å‚è€ƒ `n8n-webhook-fix.md`
- æ£€æŸ¥"Respond to Webhook"èŠ‚ç‚¹é…ç½®
- ç¡®ä¿HTTP RequestèŠ‚ç‚¹æ­£å¸¸å·¥ä½œ

### 3. 404é”™è¯¯
- æ£€æŸ¥ `vercel.json` è·¯ç”±é…ç½®
- ç¡®ä¿æ–‡ä»¶è·¯å¾„æ­£ç¡®
- æŸ¥çœ‹Verceléƒ¨ç½²æ—¥å¿—

### 4. è¶…æ—¶é”™è¯¯
- æ£€æŸ¥å›¾ç‰‡æ–‡ä»¶å¤§å° (< 10MB)
- éªŒè¯n8nå·¥ä½œæµå“åº”æ—¶é—´
- æŸ¥çœ‹Vercelå‡½æ•°æ—¥å¿—

## ğŸ”„ ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | æœ¬åœ°ç‰ˆæœ¬ | Vercelç‰ˆæœ¬ |
|------|----------|------------|
| å­˜å‚¨æ–¹å¼ | ç£ç›˜å­˜å‚¨ | å†…å­˜å­˜å‚¨ |
| æ–‡ä»¶å¤„ç† | æ–‡ä»¶æµ | Buffer |
| ç«¯å£ | 3000 | Serverless |
| é™æ€æ–‡ä»¶ | Express | Vercel Static |
| ç¯å¢ƒ | local-original | vercel-v1-adapted |

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0 (åŸå§‹ç‰ˆæœ¬)
- âœ… åŸºç¡€OCRåŠŸèƒ½
- âœ… å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆ
- âœ… è“ç™½æ¸å˜UIä¸»é¢˜
- âœ… æœ¬åœ°ç£ç›˜å­˜å‚¨

### v1.1 (Vercelé€‚é…)
- âœ… Serverlessæ¶æ„é€‚é…
- âœ… å†…å­˜å­˜å‚¨æ›¿ä»£ç£ç›˜å­˜å‚¨
- âœ… Vercelè·¯ç”±é…ç½®
- âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹
- âœ… Webhookæµ‹è¯•å·¥å…·
- âœ… éƒ¨ç½²æŒ‡å—å’Œæ•…éšœæ’é™¤

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ·»åŠ æ›´å¤šå›¾ç‰‡æ ¼å¼æ”¯æŒ
- [ ] å®ç°å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
- [ ] æ·»åŠ æ‰¹é‡å¤„ç†åŠŸèƒ½
- [ ] ä¼˜åŒ–å“åº”æ—¶é—´
- [ ] æ·»åŠ ç”¨æˆ·è®¤è¯

---

**ğŸš€ å¿«é€Ÿå¼€å§‹**: `npm install && node server.js`  
**ğŸ“± åœ¨çº¿è®¿é—®**: https://ocr.bighouse94946.fun  
**ğŸ§ª æµ‹è¯•å·¥å…·**: `node test-webhook.js` 